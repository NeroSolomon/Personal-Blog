<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>

<body>
  <a href="https://b.mashort.cn/ulk/taobao?smburl=tbopen%3a%2f%2fm.taobao.com%2ftbopen%2findex.html%3fsource%3dauto%26action%3dali.open.nav%26module%3dh5%26bootImage%3d0%26spm%3d2014.ugdhh.2200803434132.219653-24579-32896%26bc_fl_src%3dgrowth_dhh_2200803434132_219653-24579-32896%26materialid%3d219653%26h5Url%3dhttps%253A%252F%252Fh5.m.taobao.com%252Fbcec%252Fdahanghai-jump.html%253Fspm%253D2014.ugdhh.2200803434132.219653-24579-32896%2526bc_fl_src%253Dgrowth_dhh_2200803434132_219653-24579-32896&redirectUrl=https%3a%2f%2fh5.m.taobao.com%2fbcec%2fdahanghai-jump.html%3fspm%3d2014.ugdhh.2200803434132.219653-24579-32896%26bc_fl_src%3dgrowth_dhh_2200803434132_219653-24579-32896" target="__blank" onclick="handleLinkClick()">Turn to taobao</a><br>
  <span id="content"></span>
  <script src="https://cdn.bootcdn.net/ajax/libs/moment.js/1.0.0/moment.min.js"></script>
  <script>
    const content = document.getElementById('content')
    let start = null

    window.onbeforeunload = function () {
      const duration = moment().diff(start)
      content.innerHTML = "unload, duration: " + duration
    };

    document.onvisibilitychange = function (e) {
      if (document.visibilityState == 'hidden') {
        const duration = moment().diff(start)
        setTimeout(() => {
          content.innerHTML = "visibility change, duration: " + duration
        }, 10000)
      }
    }

    function handleLinkClick() {
      start = moment()
    }
  </script>
</body>

</html>