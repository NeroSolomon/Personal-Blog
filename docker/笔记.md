## 打包docker镜像
1. 创建一个Dockerfile
```dockerfile
# 基于哪个镜像
FROM dockerhub.nie.netease.com/webase/gpxdeb9:latest

## 运行命令
RUN apt-get update && \
    apt-get install gpx-docker-ci gpx-node git -y --no-install-recommends

RUN npm install -g yarn axios

# 目的是为了 node 环境下直接 require axios
RUN npm link axios

ENV PATH=/home/gpx/svr/gpx-node/bin:$PATH

RUN echo $PATH

RUN yarn -v
```

2. 构建镜像
```bash
# dockerhub.nie.netease.com/devteam/atlasx-ui： 镜像路径
# ci： tag
docker build -t dockerhub.nie.netease.com/devteam/atlasx-ui:ci .
```

3. 推送镜像到远程
```bash
docker push dockerhub.nie.netease.com/devteam/atlasx-ui:ci
```

## Dockerfile 和 docker-compose的区别
镜像构建：即创建一个镜像，它包含安装运行所需的环境、程序代码等。这个创建过程就是使用 dockerfile 来完成的

容器启动：容器最终运行起来是通过拉取构建好的镜像，通过一系列运行指令（如端口映射、外部数据挂载、环境变量等）来启动服务的。针对单个容器，这可以通过 docker run 来运行。

而如果涉及多个容器的运行（如服务编排）就可以通过 docker-compose 来实现，它可以轻松的将多个容器作为 service 来运行（当然也可仅运行其中的某个），并且提供了 scale (服务扩容) 的功能。

## 迁移docker目录
https://www.digitalocean.com/community/questions/how-to-move-the-default-var-lib-docker-to-another-directory-for-docker-on-linux

## --cache-frome
在 Docker v1.13 版本中新增了 --cache-from 功能讓開發者可以在編譯 Dockerfile 時，同時指定先下載特定的 Docker Image，透過先下載好的 Docker Layer 在跟 Dockerfile 內文比較，如果有重複的就不會在被執行，這樣可以省下蠻多編譯時間

例如：docker build --cache-frome=gitea/gitea -t gitea/gitea-new .